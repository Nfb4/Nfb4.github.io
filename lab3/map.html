<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://d3js.org/d3.v7.min.js"></script>
  </head>
  <body>
    <script type="text/javascript" src="https://d3js.org/d3.v7.min.js"></script>

    <style>
    #content .map path          { fill: #aaa;  stroke: #fff;  }
    #content .bounding-box rect { fill: none;  stroke: #333;  stroke-dasharray: 2,1; }
    #content .centroid circle   { fill: blue                   }
    </style>
    
    <div id="content"> <div class="info">Hover over to get details</div>
        <svg width="600" height="600">
          <g class="map"></g>
          <g class="bounding-box"><rect></rect></g>
          <g class="centroid"><circle r="4"></circle></g>
        </svg>
    </div>
    
    <script>
const svg = d3.select("svg"),
    width = +svg.attr("width"),
    height = +svg.attr("height");

    let projection = d3.geoMercator().scale(width / 1.8 / Math.PI)
    .translate([width / 2, height / 2]);
    
    let geoGenerator = d3.geoPath().projection(projection);
    
    function handleMouseover(e, d) {
      let pixelArea = geoGenerator.area(d);
      let bounds    = geoGenerator.bounds(d);
      let centroid  = geoGenerator.centroid(d);
      let measure   = geoGenerator.measure(d);
    
      d3.select('#content .info').text(d.properties.name + ' (path.area = ' + pixelArea.toFixed(1) + ' path.measure = ' + measure.toFixed(1) + ')');
    
      d3.select('#content .centroid')
        .style('display', 'inline')
        .attr('transform', 'translate(' + centroid + ')');
    }
    
    function update(geojson) {
      let u = d3.select('#content g.map').selectAll('path').data(geojson.features);
      u.enter().append('path').attr('d', geoGenerator).on('mouseover', handleMouseover);
    }
    
    // REQUEST DATA
    d3.json('https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson')
      .then(function(json) {  update(json)  });
    </script>
    
  </body>
</html>
