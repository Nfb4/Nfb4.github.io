<html lang="en">
  <head>
    <script src="https://d3js.org/d3.v7.min.js"></script>
  </head>

  <body>
    <script>
      let spend =
        "https://raw.githubusercontent.com/Nfb4/Nfb4.github.io/main/lab4/csvs/spend.csv";

      let csvArr = [
        "https://raw.githubusercontent.com/Nfb4/Nfb4.github.io/main/lab4/csvs/seasons/prem10-11.csv",
        "https://raw.githubusercontent.com/Nfb4/Nfb4.github.io/main/lab4/csvs/seasons/prem11-12.csv",
        "https://raw.githubusercontent.com/Nfb4/Nfb4.github.io/main/lab4/csvs/seasons/prem12-13.csv",
        "https://raw.githubusercontent.com/Nfb4/Nfb4.github.io/main/lab4/csvs/seasons/prem13-14.csv",
        "https://raw.githubusercontent.com/Nfb4/Nfb4.github.io/main/lab4/csvs/seasons/prem14-15.csv",
        "https://raw.githubusercontent.com/Nfb4/Nfb4.github.io/main/lab4/csvs/seasons/prem15-16.csv",
        "https://raw.githubusercontent.com/Nfb4/Nfb4.github.io/main/lab4/csvs/seasons/prem16-17.csv",
        "https://raw.githubusercontent.com/Nfb4/Nfb4.github.io/main/lab4/csvs/seasons/prem17-18.csv",
        "https://raw.githubusercontent.com/Nfb4/Nfb4.github.io/main/lab4/csvs/seasons/prem18-19.csv",
        "https://raw.githubusercontent.com/Nfb4/Nfb4.github.io/main/lab4/csvs/seasons/prem19-20.csv",
        "https://raw.githubusercontent.com/Nfb4/Nfb4.github.io/main/lab4/csvs/seasons/prem20-21.csv",
      ];

        cumulative = {}

        seasons = {
            '20-21': {},
            '19-20': {},
            '18-19': {},
            '17-18': {},
            '16-17': {},
            '15-16': {},
            '14-15': {},
            '13-14': {},
            '12-13': {},
            '11-12': {},
            '10-11': {},
        }


      let processData = function (csv) {
        //   console.log(csv.slice(81,86))
        d3.csv(csv).then(function (data) {
            // console.log(seasons[csv.slice(81,86)])
            for(let i=0; i<data.length; i++){
                console.log(data[i]['Squad'])
                //console.log(seasons[csv.slice(81,86)])
               seasons[csv.slice(81,86)][data[i]['Squad']].push(data[i]['Rk'], data[i]['W'], 
               data[i]['D'], data[i]['L'], data[i]['GF'], data[i]['GA'], data[i]['Pts'])
            }
        });
      };

      d3.csv(spend).then(function (data) {
        
        for(let i=0; i<data.length; i++){
            seasons[data[i].yr][data[i].team] = [data[i].spend, data[i].inc, data[i].net]

        }

      });


      for (let i=0; i<csvArr.length; i++){
          processData(csvArr[i]);
      }
    </script>
  </body>
</html>
